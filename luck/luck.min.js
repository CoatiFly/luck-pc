/*
 @ name：luck弹层组件-pc版
 @ author：前端老徐
 @ time：2015/5/20
 @ e-mail：442413729@qq.com
 @ weibo:http://weibo.com/qdlaoxu
 @ address:http://www.loveqiao.com/
*/
!function(a){"use strict";
var b={
	url:"luck/skin/",//皮肤样式路径
	name:"default"//皮肤名称
},c=document,d=0;function f(a){this.config=a}function g(a,b,c){var f,g,h,e=document.getElementsByTagName("head")[0];a=a.replace(/\s/g,""),f=/\.css$/.test(a),g=document.createElement(f?"link":"script"),h=a.replace(/\.|\//g,""),f&&(g.type="text/css",g.rel="stylesheet"),c&&g.setAttribute("charset",c),g[f?"href":"src"]=/^http:\/\//.test(a)?a:a,g.id=h,document.getElementById(h)||e.appendChild(g),b&&(g.readyState?g.onreadystatechange=function(){("loaded"==g.readyState||"complete"==g.readyState)&&(g.onreadystatechange=null,b())}:g.onload=function(){b()})}f.pt=f.prototype,f.pt.windowSize=!0,f.pt.createElement=function(a,b,d){var e=c.createElement(a);return d?e.id=d:"",b?e.className=b:"",e},f.pt.view=function(){var f,g,h,i,j,k,l,m,n,b=this.config,c=this.createElement("div","luck-layer"),e=this.createElement("div","luck-shade");return b.shadeClose&&(e.onclick=function(){luck.close(c)}),f=this.createElement("div","luck-box","luck-box-"+d),b.width&&(f.style.width=b.width),b.height&&(f.style.height=b.height),b.style&&f.setAttribute("style",config.style),b.title&&(g=this.createElement("div","luck-title"),g.innerHTML="<span>"+b.title+"</span>",0==b.move&&(g.setAttribute("move","false"),$(g).addClass("noMove")),f.appendChild(g)),0!=b.cloBtn&&(h=this.createElement("div","luck-close luck-ico"),h.onclick=function(){a.luck.close(c)},f.appendChild(h)),b.resize&&(l=this,k=this.createElement("div","luck-resize luck-ico"),k.onclick=function(){l.resize.call(l,c)},f.appendChild(k)),i=this.createElement("div","luck-con"),f.appendChild(i),i.innerHTML=b.content?b.content:'<div style="line-height:40px; padding-left:20px;"><a href="http://luck.loveqiao.com/">Luck弹层组件</a></div>',j=this.createElement("div","luck-btn"),"function"==typeof b.yes&&(m=this.createElement("button","luck-yes"),m.innerHTML=b.btn&&b.btn[0]?b.btn[0]:"确定",m.onclick=function(){b.yes(c),luck.close(c)},j.appendChild(m)),"function"==typeof b.no&&(n=this.createElement("button","luck-no"),n.innerHTML=b.btn&&b.btn[1]?b.btn[1]:"取消",n.onclick=function(){b.no(c),a.luck.close(c)},j.appendChild(n)),("function"==typeof b.yes||"function"==typeof b.no)&&f.appendChild(j),c.appendChild(e),c.appendChild(f),c},f.pt.R=function(a){return document.getElementById(a)},f.pt.offset=function(a){var b=$(window).width(),c=$(window).height(),d=this.R("luck-box-"+a),e=d.offsetWidth,f=d.offsetHeight;d.style.left=b/2-e/2+"px",d.style.top=c/2-f/2+"px",$(d).addClass("show")},f.pt.move=function(a){var d,e,f,b=$("#luck-box-"+a),c=b.children(".luck-title");"false"!=c.attr("move")&&(d=!1,c.mousedown(function(a){d=!0,e=a.pageX-parseInt(b.css("left")),f=a.pageY-parseInt(b.css("top")),b.addClass("move")}),$(document).mousemove(function(a){if(d){var c=a.pageX-e,g=a.pageY-f,h=$(window).width()-b.outerWidth(),i=$(window).height()-b.outerHeight();0>c&&(c=0),0>g&&(g=0),c>h&&(c=h),g>i&&(g=i),b.css({top:g,left:c})}}).mouseup(function(){d=!1,b.removeClass("move")}))},f.pt.resize=function(a){var b=$(a),c="function"==typeof this.config.resize;this.windowSize?($("html,body").addClass("hideScroll"),b.addClass("luck-full"),this.windowSize=!1,c&&this.config.resize(b,"big")):($("html,body").removeClass("hideScroll"),b.removeClass("luck-full"),this.windowSize=!0,c&&this.config.resize(b,"small"))},a.luck={open:function(b){var e=new f(b),g=e.view();return c.body.appendChild(g),e.offset(d),e.move(d),b.time&&setTimeout(function(){a.luck.close(g)},b.time),d++,g},alert:function(b,c,d){a.luck.open({title:b,content:'<span class="luck-dialog luck-ico-'+(d?d:0)+'"><i class="luck-ico"></i>'+c+"</span>",yes:function(){}})},confirm:function(b,c,d,e){a.luck.open({title:b,content:'<span class="luck-dialog luck-ico-3"><i class="luck-ico"></i>'+c+"</span>",btn:e,yes:function(){"function"==typeof d&&d(!0)},no:function(){"function"==typeof d&&d(!1)}})},prompt:function(b,c,d){a.luck.open({title:b,content:'<textarea class="luck-prompt" placeholder="'+c+'"></textarea>',yes:function(a){"function"==typeof d&&d($(a).find("textarea").val())},no:function(){"function"==typeof d&&d(!1)}})},iframe:function(b,c,d,e){a.luck.open({title:b,content:'<iframe width="'+d+'" height="'+e+'" style="display:block" src="'+c+'" frameborder="0"></iframe>'})},close:function(a){try{a?c.body.removeChild(a):$(".luck-layer").remove()}catch(b){}}},g(b.url+b.name+"/luck.css")}(window);
